@model List<cursoMVC.Models.UserTableViewModels>
@{
    ViewBag.Title = "Index";
}

<h2>Uusuarios</h2>

<div class="row">
    <div class="col-md-12">
        <button type="button" class="btn btn-primary" onclick="document.location.href='@Url.Content("~/User/Nuevo")'">Nuevo</button>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <table class="table table-bordered">
            <tr>
                <td>#</td>
                <td>Email</td>
            </tr>
                @foreach (var oElemento in Model)
                {
        <tr>
            <td>@oElemento.id</td>
            <td>@oElemento.Email</td>

            <td><button onclick="document.location.href='@Url.Content("~/User/Edit/"+ oElemento.id)'" type="button" class="btn btn-info">Editar</button></td>
            <td><button onclick="jsDelete(@oElemento.id)" type="button" class="btn btn-danger">Eliminar</button></td>

            @*<td><button type="button" class="btn btn-danger">Eliminar</button></td>*@
        </tr>
                }
            </table>
    </div>
</div>

<script>
    function jsDelete(id) {

        if (confirm("Está seguro de eliminar registro")) {

            $.ajax({
                url: "@Url.Content("~/User/Delete/")" + id,
                type: "POST",
                success: function (response) {
                    if (response == 1) {
                        document.location.href = "@Url.Content("~/User/Index")"
                    } else {
                        alert("ERROR")
                    }
                }
            });
        }
    }
</script>